<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <meta name="google-site-verification" content="4SG_2KfCa2XVgO0fu6cjWwpp63M1in1SLQUBAXW0d3I" /> <title>Configure the package behaviour - Laravel Translate</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-8FNXG696PB"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-8FNXG696PB', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Configure the package behaviour | Laravel Translate</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Configure the package behaviour" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Configuration" /> <meta property="og:description" content="Configuration" /> <meta property="og:site_name" content="Laravel Translate" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-11-04T02:33:22+00:00" /> <script type="application/ld+json"> {"description":"Configuration","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/logo.png"}},"@type":"BlogPosting","url":"/configuration/package-configuration","headline":"Configure the package behaviour","dateModified":"2020-11-04T02:33:22+00:00","datePublished":"2020-11-04T02:33:22+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/configuration/package-configuration"},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/index" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="/basic-usage" class="nav-list-link">Basic Usage</a></li><li class="nav-list-item"><a href="/ui-documentation" class="nav-list-link">UI Documentation</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/configuration/configuration" class="nav-list-link">Configuration</a><ul class="nav-list "><li class="nav-list-item active"><a href="/configuration/package-configuration" class="nav-list-link active">Configure the package behaviour</a></li><li class="nav-list-item "><a href="/configuration/driver-configuration" class="nav-list-link">Driver Configuration</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/extending/index" class="nav-list-link">Extending</a><ul class="nav-list "><li class="nav-list-item "><a href="/extending/detector" class="nav-list-link">Detector</a></li><li class="nav-list-item "><a href="/extending/interceptor" class="nav-list-link">Interceptor</a></li><li class="nav-list-item "><a href="/extending/translator" class="nav-list-link">Translator</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/translators/index" class="nav-list-link">Translators</a><ul class="nav-list "><li class="nav-list-item "><a href="/translators/official" class="nav-list-link">Official Translators</a></li><li class="nav-list-item "><a href="/translators/third-party" class="nav-list-link">Third Party Translators</a></li></ul></li></ul> </nav> <footer class="site-footer"> <p> <button type="button" class="btn btn-sm btn-block btn-purple js-toggle-dark-mode">Come to the dark side</button> </p> <p> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Laravel Translate" aria-label="Search Laravel Translate" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/tobytwigger/laravel-translate" class="site-button" > Laravel Translate on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/configuration/configuration">Configuration</a></li> <li class="breadcrumb-nav-list-item"><span>Configure the package behaviour</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="configuration"> <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration </h1> <details open=""> <summary class="text-delta"> Contents </summary> <ol id="markdown-toc"> <li><a href="#configuration-file" id="markdown-toc-configuration-file">Configuration File</a> <ol> <li><a href="#table" id="markdown-toc-table">Table</a></li> <li><a href="#supported-languages" id="markdown-toc-supported-languages">Supported Languages</a> <ol> <li><a href="#support-languages-in-config" id="markdown-toc-support-languages-in-config">Support languages in config</a></li> <li><a href="#support-languages-directly" id="markdown-toc-support-languages-directly">Support languages directly</a></li> </ol> </li> <li><a href="#detection" id="markdown-toc-detection">Detection</a> <ol> <li><a href="#body-detection" id="markdown-toc-body-detection">Body Detection</a></li> <li><a href="#cookie-detection" id="markdown-toc-cookie-detection">Cookie Detection</a></li> <li><a href="#header-detection" id="markdown-toc-header-detection">Header Detection</a></li> </ol> </li> </ol> </li> <li><a href="#translation-configuration" id="markdown-toc-translation-configuration">Translation Configuration</a></li> </ol> </details><hr /> <h2 id="configuration-file"> <a href="#configuration-file" class="anchor-heading" aria-labelledby="configuration-file"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration File </h2> <p>This can be published using <code class="language-plaintext highlighter-rouge">php artisan vendor:publish</code> so you can customise the package. The options available are documented here, but translator drivers are documented in the <a href="/configuration/driver-configuration#registering-a-new-configuration">driver configuration</a> docs.</p> <h3 id="table"> <a href="#table" class="anchor-heading" aria-labelledby="table"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table </h3> <p>The <code class="language-plaintext highlighter-rouge">table</code> key defines the table to use. This must be set before the migration is run, and should not be changed once the migration has been run.</p> <p>It defaults to <code class="language-plaintext highlighter-rouge">translations</code>, which is a sensible default assuming you don’t already have a table with this name.</p> <h3 id="supported-languages"> <a href="#supported-languages" class="anchor-heading" aria-labelledby="supported-languages"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Supported Languages </h3> <p>The convenience of instant translations through a translation service comes with one main downside - you’re relying on the translation service to accurately translate your website. It won’t always produce the best translation, which is why you’re able to override the translation through your lang files or the database.</p> <p>A happy medium is to use instant translations to initially translate the site, then reviewing the translations and changing any translations if necessary. To stop users using your website in a language which is being reviewed, you can define the languages that should be supported. Any language requested that isn’t in this array is rejected.</p> <h4 id="support-languages-in-config"> <a href="#support-languages-in-config" class="anchor-heading" aria-labelledby="support-languages-in-config"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Support languages in config </h4> <p>The <code class="language-plaintext highlighter-rouge">supported_languages</code> key in the config file contains an array of supported languages. If it’s an empty array, all languages are supported. If anything is in the array, only those languages will be supported.</p> <h4 id="support-languages-directly"> <a href="#support-languages-directly" class="anchor-heading" aria-labelledby="support-languages-directly"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Support languages directly </h4> <p>At any point (generally in your service provider), you can call the following to support any given language(s).</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="err">\</span><span class="nc">Twigger\Translate\Translate\Interceptors\SupportedLanguageInterceptor</span><span class="o">::</span><span class="nf">support</span><span class="p">([</span><span class="s1">'en'</span><span class="p">,</span> <span class="s1">'fr'</span><span class="p">]);</span>
</code></pre></div></div> <p>This function can be called multiple times to support multiple languages. You can pass it a single language or multiple languages.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="nc">Twigger\Translate\Translate\Interceptors\SupportedLanguageInterceptor</span><span class="o">::</span><span class="nf">support</span><span class="p">(</span><span class="s1">'en'</span><span class="p">);</span>
<span class="err">\</span><span class="nc">Twigger\Translate\Translate\Interceptors\SupportedLanguageInterceptor</span><span class="o">::</span><span class="nf">support</span><span class="p">([</span><span class="s1">'en'</span><span class="p">,</span> <span class="s1">'fr'</span><span class="p">]);</span>
</code></pre></div></div> <h3 id="detection"> <a href="#detection" class="anchor-heading" aria-labelledby="detection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Detection </h3> <p>These are configuration options related to the target language detector. Most detectors have configuration to change things like keys to look for, and all of them can be turned off by making calls in your Service Provider.</p> <h4 id="body-detection"> <a href="#body-detection" class="anchor-heading" aria-labelledby="body-detection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Body Detection </h4> <p>The body detection gets the target language from the request body. The key to use is defined in config (<code class="language-plaintext highlighter-rouge">body_key</code>). It defaults to language.</p> <p>If the key is not found in the request, the detector will try other strategies. If you don’t want to even check the request, you can add the following to the <code class="language-plaintext highlighter-rouge">register</code> function in your <code class="language-plaintext highlighter-rouge">AppServiceProvider</code>.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="nc">Twigger\Translate\TranslationServiceProvider</span><span class="o">::</span><span class="nf">withoutBodyDetector</span><span class="p">();</span>
</code></pre></div></div> <h4 id="cookie-detection"> <a href="#cookie-detection" class="anchor-heading" aria-labelledby="cookie-detection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cookie Detection </h4> <p>The cookie detection gets the target language from a cookie. The key of the cookie to use is defined in config (<code class="language-plaintext highlighter-rouge">cookie_key</code>). It defaults to language.</p> <p>If the cookie is not present, the detector will try other strategies. If you don’t want to even check for a cookie, you can add the following to the <code class="language-plaintext highlighter-rouge">register</code> function in your <code class="language-plaintext highlighter-rouge">AppServiceProvider</code>.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="nc">Twigger\Translate\TranslationServiceProvider</span><span class="o">::</span><span class="nf">withoutCookieDetector</span><span class="p">();</span>
</code></pre></div></div> <h4 id="header-detection"> <a href="#header-detection" class="anchor-heading" aria-labelledby="header-detection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Header Detection </h4> <p>The header detection gets the target language from a header. Most modern browsers automatically set this header based on user preferences.</p> <p>You may set an array of allowed languages, using the <code class="language-plaintext highlighter-rouge">allowed_languages</code> configuration. If you want to allow any language, set this to an empty array (the default).</p> <p>If the header is not present, the detector falls back to the Laravel fallback language. If you don’t want to even check for a header, and so require a user to specify their language if different from the fallback, you can add the following to the <code class="language-plaintext highlighter-rouge">register</code> function in your <code class="language-plaintext highlighter-rouge">AppServiceProvider</code>.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="nc">Twigger\Translate\TranslationServiceProvider</span><span class="o">::</span><span class="nf">withoutHeaderDetector</span><span class="p">();</span>
</code></pre></div></div> <h2 id="translation-configuration"> <a href="#translation-configuration" class="anchor-heading" aria-labelledby="translation-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Translation Configuration </h2> <p>You may also customise how translations are processed. By default, the following methods are used when any string is translated. If one of them is able to return a translation, the rest are skipped.</p> <ol> <li>Check if the cache contains the translation. This is useful for speeding up translations after an initial translation</li> <li>Check if the database contains the translation. This allows you to override any translation through your website UI, to provide a convenient way to improve translations.</li> <li>Check your lang files to see if the translation has been defined. Replacements aren’t supported, so you should use lang files with the original text as the key. This also is only supported if the source language is the same as the source language for your translation files.</li> <li>Call the translator to get the translation value.</li> </ol> <p>Assuming a translation gets to stage 4, the other steps are able to react to and save the translation.</p> <p>The key will be saved in the database to make it easier to override any translations. This also means that any future calls, even if they bypass the cache, will be able to easily resolve the translation from the database rather than relying on the third party translation service.</p> <p>Any translation will also be saved in the cache forever, to ensure translating may happen as quickly as possible.</p> <p>If you want to take out any of the steps 1-3, you can call the relevant function in the <code class="language-plaintext highlighter-rouge">register</code> function in your <code class="language-plaintext highlighter-rouge">AppServiceProvider</code></p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="nc">Twigger\Translate\TranslationServiceProvider</span><span class="o">::</span><span class="nf">withoutCache</span><span class="p">();</span> <span class="c1">// Don't use the cache</span>
<span class="err">\</span><span class="nc">Twigger\Translate\TranslationServiceProvider</span><span class="o">::</span><span class="nf">withoutDatabaseOverrides</span><span class="p">();</span> <span class="c1">// Don't look for translations in the database</span>
<span class="err">\</span><span class="nc">Twigger\Translate\TranslationServiceProvider</span><span class="o">::</span><span class="nf">withoutLangFiles</span><span class="p">();</span> <span class="c1">// Don't load any language files</span>
</code></pre></div></div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"> Copyright &copy; 2020 Toby Twigger. Distributed by an <a href=\"https://github.com/tobytwigger/laravel-translate/blob/develop/LICENCE.md\">MIT license.</a> </p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/tobytwigger/laravel-translate/edit/develop/_docs/configuration/package-configuration.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script> const toggleDarkMode = document.querySelector('.js-toggle-dark-mode'); jtd.addEvent(toggleDarkMode, 'click', function(){ if (jtd.getTheme() === 'dark') { jtd.setTheme('light'); setCookie('theme', 'light', 365); toggleDarkMode.textContent = 'Come to the dark side'; } else { jtd.setTheme('dark'); setCookie('theme', 'dark', 365); toggleDarkMode.textContent = 'Return to the light side'; } }); jtd.onReady(function() { if(getCookie('theme') === 'dark') { jtd.setTheme('dark'); toggleDarkMode.textContent = 'Return to the light side'; } else { jtd.setTheme('light'); toggleDarkMode.textContent = 'Come to the dark side'; } }); function setCookie(cname, cvalue, exdays) { let d = new Date(); d.setTime(d.getTime() + (exdays*24*60*60*1000)); let expires = "expires="+ d.toUTCString(); document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"; } function getCookie(cname) { let name = cname + "="; let decodedCookie = decodeURIComponent(document.cookie); let ca = decodedCookie.split(';'); for(let i = 0; i <ca.length; i++) { let c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; } </script> </body> </html>
